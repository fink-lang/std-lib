{new} = import '@fink/js-interop/reflect.fnk'
{Promise, globals} = import '@fink/js-interop/globals.fnk'

{is_fn} = import './fn.fnk'



parallel = fn tasks:
  pipe [...tasks]:
    fold await item, all=[]:
      [...all, item]



sequential = fold await item, all=[]:
  [...all, item]



sleep = fn ms:
  new Promise, fn resolve:

    globals.setTimeout resolve, ms



is_async = fn value:
  match value:
    {then: is_fn ?}: true
    else: false
