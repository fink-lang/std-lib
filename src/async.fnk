{new} = import '@fink/js-interop/reflect.fnk'
{Promise, setTimeout} = import '@fink/js-interop/globals.fnk'

{is_fn} = import './fn.fnk'



parallel = fn tasks:
  pipe [...tasks]:
    fold item, all=[]:
      [...all, await item]



sequential = fold item, all=[]:
  [...all, await item]



sleep = fn ms:
  new Promise, fn resolve:
    setTimeout resolve, ms



is_async = fn obj:
  match obj:
    {then: is_fn ?}: true
    else: false
